@model OBM.Models.ViewModels.TournamentViewModel
@{
    ViewBag.Title = Model.TournamentName;
    ViewBag.ApiID = Model.ApiId;
    ViewBag.TourneyID = Model.TournamentID;

    <h1>@Html.DisplayFor(model => model.TournamentName)</h1>

    if (ViewBag.Access == true)
    {
<div>
    <hr />
    <dl class="dl-horizontal">
        <dt>Description</dt>
        <dd>@Html.DisplayFor(model => model.Description)</dd>

        <dt>Game</dt>
        <dd>@Html.DisplayFor(model => model.Game)</dd>

        <dt>Team Based?</dt>
        <dd>@Html.DisplayFor(model => model.IsTeams)</dd>

        <dt>Event</dt>
        <dd>@Html.ActionLink(Model.EventName.ToString(), "/Details/" + Model.EventID)</dd>

        <dt>Tournament Organizer</dt>
        <dd>@Html.DisplayFor(model => model.OrganizerName)</dd>

        <dt>Challonge URL:</dt>
        <dd><a href="https://challonge.com/@Html.DisplayFor(model => model.UrlString)">https://challonge.com/@Html.DisplayFor(model => model.UrlString)</a></dd>
        @if (Model.IsStarted == "No")
        {
            <p>@TempData["Result"]</p>
            using (Html.BeginForm("AddSingleParticipant", "Competitor", FormMethod.Post))
            {
                <dt>Add Participants:</dt>
                <dd>
                    <select name="options" id="options">
                        <option>
                            -Select Method-
                        </option>
                        <option value="Single">
                            Single Participant
                        </option>
                        <option value="Bulk">
                            Bulk Participants
                        </option>
                    </select>
                    <br />

                    <div class="Single add" id="participantOptions">
                        <label for="create">Participant's Name or Gamer Tag: </label>
                        <br />
                        <input type="text" name="singleAdd" />
                        <input type="submit" value="Add" class="btn createbtn" />
                        <input type="hidden" name="ApiID" value="@ViewBag.ApiID" />
                        <input type="hidden" name="TourneyID" value="@ViewBag.TourneyID" />
                    </div>
                </dd>
            }
            using (Html.BeginForm("BulkAddParticipants", "Competitor", FormMethod.Post))
            {
                <dt></dt>
                <dd>
                    <div class="Bulk add" id="participantOptions">
                        <div>
                            <i>Format input like; participant,participant,...</i>
                        </div>
                        <label for="bulkadd">Bulk add Participants:</label>
                        <br />
                        <input type="text" name="bulkadd" />
                        <input type="submit" value="Bulk Add" class="btn createbtn" />
                        <input type="hidden" name="ApiID" value="@ViewBag.ApiID" />
                        <input type="hidden" name="TourneyID" value="@ViewBag.TourneyID" />
                    </div>
                </dd>
            }
            <button type="button" onclick="hideShow('seed-div');">Seed</button>
            <br />

            <div id="seed-div" style="display:none">
                <div id="tabs-1">
                    <p>@ViewBag.keyCheck</p>
                    <p>@ViewBag.Success</p>

                    <ul>
                        <li><a href="#tabs-2">Select Competitors</a></li>
                        <li><a href="#tabs-3">Rank Selected</a></li>
                        <li><a href="#tabs-4">Additional Seeding</a></li>
                    </ul>

                    <div id="tabs-2">
                        <ul id="selectable-rank" class="ui-selectable">
                            @foreach (var comp in Model.CompetitorList)
                            {
                                <li>@comp</li>
                            }
                        </ul>
                    </div>

                    <div id="tabs-3">
                        <div class="col">
                            <ol id="sortable-1" class="ui-sortable">
                                <lh>empty</lh>
                            </ol>
                        </div>
                        <div class="col btn-group btn-group-toggle" data-toggle="buttons">
                            <label class="btn btn-secondary active">
                                <input type="radio" name="seed-method" value="trad" autocomplete="off" checked="checked">Traditional
                            </label>
                            <label class="btn btn-secondary">
                                <input type="radio" name="seed-method" value="seq" autocomplete="off">Sequential
                            </label>
                        </div>
                    </div>

                    <div id="tabs-4">
                        <div class="row">
                            <div class="col card bg-light">
                                <ul id="sortable-2" class="ui-sortable sortable">
                                    @foreach (var comp in Model.CompetitorList)
                                    {
                                        <li>@comp</li>
                                    }
                                </ul>
                            </div>
                            <div class="col">
                                <div id="groups">
                                </div>
                                <a onclick="addGroup()">Add Group</a>
                            </div>
                        </div>
                    </div>
                    <button type="button" id="saveBtn" onclick="saveSeed()" class="btn btn-success">Save Seed</button>
                </div>
            </div>
            <br />
        }
    </dl>

        <table class="table table-bordered table-striped">
            <tr>
                <th>Brackets</th>
            </tr>

        </table>
        <table class="table table-bordered table-striped">
            <tr>
                <th>Competitors</th>
            </tr>
        </table>
    </div>

        <input id="EventID" type="hidden" value="@Model.EventID" />
        <input id="TournamentID" type="hidden" value="@Model.TournamentID" />
        <input id="UrlString" type="hidden" value="@Model.UrlString" />

        <button type="button" onclick="hideShow('MinimalGraph');">Show Time Line</button>
        <div id="MinimalGraph" style="display:block">
            <canvas id="myChart"></canvas>
        </div>

        using (Html.BeginForm(FormMethod.Post))
        {
            <div class="form-group">
                <input id="delete-tournament" type="submit" value="Delete Tournament" class="btn btn-danger" />
            </div>
        }
        <div>
            @Html.ActionLink("Back to Event", "Manage", "Events", routeValues: new { id = Model.EventID }, htmlAttributes: new { @class = "btn registerbtn" })
        </div>
    }
    else
    {
        <div class="form-horizontal">
            <h4>Access Denied</h4>
        </div>
    }


    @section scripts
    {
        <script type="text/javascript" src="~/Scripts/participants.js"></script>
    }
}

@Scripts.Render("~/bundles/TournamentDisplay")
